{"version":3,"file":"worker-6d6dd1a7.js","sources":["../../../node_modules/.pnpm/@ffmpeg+ffmpeg@0.12.7/node_modules/@ffmpeg/ffmpeg/dist/esm/const.js","../../../node_modules/.pnpm/@ffmpeg+ffmpeg@0.12.7/node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js","../../../node_modules/.pnpm/@ffmpeg+ffmpeg@0.12.7/node_modules/@ffmpeg/ffmpeg/dist/esm/worker.js"],"sourcesContent":["export const MIME_TYPE_JAVASCRIPT = \"text/javascript\";\nexport const MIME_TYPE_WASM = \"application/wasm\";\nexport const CORE_VERSION = \"0.12.1\";\nexport const CORE_URL = `https://unpkg.com/@ffmpeg/core@${CORE_VERSION}/dist/umd/ffmpeg-core.js`;\nexport var FFMessageType;\n(function (FFMessageType) {\n    FFMessageType[\"LOAD\"] = \"LOAD\";\n    FFMessageType[\"EXEC\"] = \"EXEC\";\n    FFMessageType[\"WRITE_FILE\"] = \"WRITE_FILE\";\n    FFMessageType[\"READ_FILE\"] = \"READ_FILE\";\n    FFMessageType[\"DELETE_FILE\"] = \"DELETE_FILE\";\n    FFMessageType[\"RENAME\"] = \"RENAME\";\n    FFMessageType[\"CREATE_DIR\"] = \"CREATE_DIR\";\n    FFMessageType[\"LIST_DIR\"] = \"LIST_DIR\";\n    FFMessageType[\"DELETE_DIR\"] = \"DELETE_DIR\";\n    FFMessageType[\"ERROR\"] = \"ERROR\";\n    FFMessageType[\"DOWNLOAD\"] = \"DOWNLOAD\";\n    FFMessageType[\"PROGRESS\"] = \"PROGRESS\";\n    FFMessageType[\"LOG\"] = \"LOG\";\n    FFMessageType[\"MOUNT\"] = \"MOUNT\";\n    FFMessageType[\"UNMOUNT\"] = \"UNMOUNT\";\n})(FFMessageType || (FFMessageType = {}));\n","export const ERROR_UNKNOWN_MESSAGE_TYPE = new Error(\"unknown message type\");\nexport const ERROR_NOT_LOADED = new Error(\"ffmpeg is not loaded, call `await ffmpeg.load()` first\");\nexport const ERROR_TERMINATED = new Error(\"called FFmpeg.terminate()\");\nexport const ERROR_IMPORT_FAILURE = new Error(\"failed to import ffmpeg-core.js\");\n","/// <reference no-default-lib=\"true\" />\n/// <reference lib=\"esnext\" />\n/// <reference lib=\"webworker\" />\nimport { CORE_URL, FFMessageType } from \"./const.js\";\nimport { ERROR_UNKNOWN_MESSAGE_TYPE, ERROR_NOT_LOADED, ERROR_IMPORT_FAILURE, } from \"./errors.js\";\nlet ffmpeg;\nconst load = async ({ coreURL: _coreURL = CORE_URL, wasmURL: _wasmURL, workerURL: _workerURL, }) => {\n    const first = !ffmpeg;\n    const coreURL = _coreURL;\n    const wasmURL = _wasmURL ? _wasmURL : _coreURL.replace(/.js$/g, \".wasm\");\n    const workerURL = _workerURL\n        ? _workerURL\n        : _coreURL.replace(/.js$/g, \".worker.js\");\n    try {\n        // when web worker type is `classic`.\n        importScripts(coreURL);\n    }\n    catch {\n        // when web worker type is `module`.\n        self.createFFmpegCore = (await import(\n        /* @vite-ignore */ coreURL)).default;\n        if (!self.createFFmpegCore) {\n            throw ERROR_IMPORT_FAILURE;\n        }\n    }\n    ffmpeg = await self.createFFmpegCore({\n        // Fix `Overload resolution failed.` when using multi-threaded ffmpeg-core.\n        // Encoded wasmURL and workerURL in the URL as a hack to fix locateFile issue.\n        mainScriptUrlOrBlob: `${coreURL}#${btoa(JSON.stringify({ wasmURL, workerURL }))}`,\n    });\n    ffmpeg.setLogger((data) => self.postMessage({ type: FFMessageType.LOG, data }));\n    ffmpeg.setProgress((data) => self.postMessage({\n        type: FFMessageType.PROGRESS,\n        data,\n    }));\n    return first;\n};\nconst exec = ({ args, timeout = -1 }) => {\n    ffmpeg.setTimeout(timeout);\n    ffmpeg.exec(...args);\n    const ret = ffmpeg.ret;\n    ffmpeg.reset();\n    return ret;\n};\nconst writeFile = ({ path, data }) => {\n    ffmpeg.FS.writeFile(path, data);\n    return true;\n};\nconst readFile = ({ path, encoding }) => ffmpeg.FS.readFile(path, { encoding });\n// TODO: check if deletion works.\nconst deleteFile = ({ path }) => {\n    ffmpeg.FS.unlink(path);\n    return true;\n};\nconst rename = ({ oldPath, newPath }) => {\n    ffmpeg.FS.rename(oldPath, newPath);\n    return true;\n};\n// TODO: check if creation works.\nconst createDir = ({ path }) => {\n    ffmpeg.FS.mkdir(path);\n    return true;\n};\nconst listDir = ({ path }) => {\n    const names = ffmpeg.FS.readdir(path);\n    const nodes = [];\n    for (const name of names) {\n        const stat = ffmpeg.FS.stat(`${path}/${name}`);\n        const isDir = ffmpeg.FS.isDir(stat.mode);\n        nodes.push({ name, isDir });\n    }\n    return nodes;\n};\n// TODO: check if deletion works.\nconst deleteDir = ({ path }) => {\n    ffmpeg.FS.rmdir(path);\n    return true;\n};\nconst mount = ({ fsType, options, mountPoint }) => {\n    let str = fsType;\n    let fs = ffmpeg.FS.filesystems[str];\n    if (!fs)\n        return false;\n    ffmpeg.FS.mount(fs, options, mountPoint);\n    return true;\n};\nconst unmount = ({ mountPoint }) => {\n    ffmpeg.FS.unmount(mountPoint);\n    return true;\n};\nself.onmessage = async ({ data: { id, type, data: _data }, }) => {\n    const trans = [];\n    let data;\n    try {\n        if (type !== FFMessageType.LOAD && !ffmpeg)\n            throw ERROR_NOT_LOADED;\n        switch (type) {\n            case FFMessageType.LOAD:\n                data = await load(_data);\n                break;\n            case FFMessageType.EXEC:\n                data = exec(_data);\n                break;\n            case FFMessageType.WRITE_FILE:\n                data = writeFile(_data);\n                break;\n            case FFMessageType.READ_FILE:\n                data = readFile(_data);\n                break;\n            case FFMessageType.DELETE_FILE:\n                data = deleteFile(_data);\n                break;\n            case FFMessageType.RENAME:\n                data = rename(_data);\n                break;\n            case FFMessageType.CREATE_DIR:\n                data = createDir(_data);\n                break;\n            case FFMessageType.LIST_DIR:\n                data = listDir(_data);\n                break;\n            case FFMessageType.DELETE_DIR:\n                data = deleteDir(_data);\n                break;\n            case FFMessageType.MOUNT:\n                data = mount(_data);\n                break;\n            case FFMessageType.UNMOUNT:\n                data = unmount(_data);\n                break;\n            default:\n                throw ERROR_UNKNOWN_MESSAGE_TYPE;\n        }\n    }\n    catch (e) {\n        self.postMessage({\n            id,\n            type: FFMessageType.ERROR,\n            data: e.toString(),\n        });\n        return;\n    }\n    if (data instanceof Uint8Array) {\n        trans.push(data.buffer);\n    }\n    self.postMessage({ id, type, data }, trans);\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1,2]}